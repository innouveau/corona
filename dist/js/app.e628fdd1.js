(function(t){function e(e){for(var n,i,o=e[0],l=e[1],c=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,o=1;o<r.length;o++){var l=r[o];0!==s[l]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},s={app:0},a=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},1731:function(t,e,r){"use strict";var n=r("c854"),s=r.n(n);s.a},"2c1d":function(t,e,r){},"2f5c":function(t,e,r){},3192:function(t,e,r){},"32e2":function(t,e,r){"use strict";var n=r("5d47"),s=r.n(n);s.a},"437c":function(t,e,r){},5618:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);var n=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app"},[r("tools"),t.dataLoaded?r("graphs"):t._e()],1)},a=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tools"},[r("country-picker"),r("type-picker"),r("map-tools")],1)},o=[],l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"country-picker"},t._l(t.countries,(function(t){return r("country",{attrs:{country:t}})})),1)},c=[],u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"country",on:{click:function(e){return t.toggle()}}},[r("checkbox",{attrs:{"is-active":t.isActive}}),r("div",{staticClass:"country__bullet",style:{"background-color":t.country.color}}),r("div",{staticClass:"country__title"},[t._v(" "+t._s(t.country.title)+" ")])],1)},p=[];class d{constructor({id:t=null,title:e="",color:r="",entries:n=[]}){this.id=t,this.title=e,this.color=r,this.entries=n,this.active=!1}}var m=d,h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"checkbox",class:{"checkbox--active":t.isActive}},[r("inline-svg",{attrs:{src:"assets/img/tools/checkmark.svg"}})],1)},f=[],v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"container",staticClass:"inline-svg"})},g=[],y=r("1157"),b=r.n(y),_={name:"inline-svg",components:{},props:{src:{type:String,required:!0}},computed:{},methods:{readSvg(){console.log("!"),b()(this.$refs.container).empty(),b.a.get(this.src,t=>{let e=b()(t).find("svg");e=e.removeAttr("xmlns:a"),b()(this.$refs.container).append(e)},"xml")}},mounted(){this.readSvg()},watch:{src(){this.readSvg()}}},x=_,P=(r("9e28"),r("2877")),w=Object(P["a"])(x,v,g,!1,null,null,null),O=w.exports,$={name:"checkbox",components:{inlineSvg:O},props:{isActive:{type:Boolean,required:!0}},computed:{},methods:{}},k=$,S=(r("adee"),Object(P["a"])(k,h,f,!1,null,null,null)),j=S.exports,C={name:"country",components:{checkbox:j},props:{country:{type:m,required:!0}},computed:{isActive(){return this.country.active}},methods:{toggle(){this.$store.commit("countries/updatePropertyOfItem",{item:this.country,property:"active",value:!this.country.active})}},mounted(){console.log("country")}},I=C,A=(r("bb88"),Object(P["a"])(I,u,p,!1,null,null,null)),E=A.exports,L={name:"country-picker",components:{country:E},props:{},computed:{countries(){return this.$store.state.countries.all}},methods:{}},q=L,B=(r("588d"),Object(P["a"])(q,l,c,!1,null,null,null)),M=B.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"type-picker"},t._l(t.types,(function(t){return r("type",{attrs:{type:t}})})),1)},F=[],J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"type",on:{click:function(e){return t.toggle()}}},[r("checkbox",{attrs:{"is-active":t.isActive}}),r("div",{staticClass:"type__title"},[t._v(" "+t._s(t.type.title)+" ")])],1)},N=[];class z{constructor({id:t=null,title:e="",property:r=""}){this.id=t,this.title=e,this.property=r,this.active=!1}}var D=z,G={name:"type",components:{Checkbox:j},props:{type:{type:D,required:!0}},computed:{isActive(){return this.type.active}},methods:{toggle(){this.$store.commit("types/updatePropertyOfItem",{item:this.type,property:"active",value:!this.type.active})}}},H=G,K=(r("ed8a"),Object(P["a"])(H,J,N,!1,null,null,null)),Q=K.exports,R={name:"type-picker",components:{type:Q},props:{},computed:{types(){return this.$store.state.types.all}},methods:{}},U=R,V=(r("1731"),Object(P["a"])(U,T,F,!1,null,null,null)),W=V.exports,X=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"map-tools"},[t._v(" Start at "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.fatalities,expression:"fatalities"}],domProps:{value:t.fatalities},on:{input:function(e){e.target.composing||(t.fatalities=e.target.value)}}}),t._v(" fatalities. ")])},Y=[],Z={name:"map-tools",components:{},props:{},computed:{fatalities:{set(t){this.$store.commit("mapping/updateProperty",{key:"fatalities",value:t})},get(){return this.$store.state.settings.fatalities}}},methods:{}},tt=Z,et=(r("e305"),Object(P["a"])(tt,X,Y,!1,null,null,null)),rt=et.exports,nt={name:"tools",components:{mapTools:rt,typePicker:W,countryPicker:M},props:{},computed:{},methods:{}},st=nt,at=(r("bcae"),Object(P["a"])(st,i,o,!1,null,null,null)),it=at.exports,ot=r("2f62");const lt={getAll(t){return t.all},getItemById:t=>e=>{let r=t.all.find(t=>t.id===e);return r||null},getItemByProperty:t=>(e,r)=>t.all.find(t=>t[e]===r),getSetByIds:t=>e=>{let r=[];for(let n of e){let e=t.all.find(t=>t.id===n);e&&r.push(e)}return r},getLastItem(t){return t.all[t.all.length-1]}},ct={},ut={init(t,e,r){t.all=[];for(let n of e)n&&t.all.push(new r(n))},setCurrent(t,e){t.current=e},unsetCurrent(t){t.current=null},create(t,e,r){t.all.push(new r(e))},update(t,e){t.all=t.all.map(t=>(t.id===e.id&&(t=e),t))},updatePropertyOfItem(t,e,r,n){t.all=t.all.map(t=>(t.id===e.id&&(t[r]=n),t))},delete(t,e){t.all=t.all.filter((function(t){return t.id!==e.id}))},updateProperty(t,e){t[e.key]=e.value},reset(t){t.all=[],t.current=null}};var pt={getters:lt,actions:ct,mutations:ut};const dt=m,mt={all:[],selected:[],current:null},ht={...pt.getters},ft={},vt={init(t,e){return pt.mutations.init(t,e,dt)},updatePropertyOfItem(t,e){pt.mutations.updatePropertyOfItem(t,e.item,e.property,e.value)}};var gt={namespaced:!0,state:mt,getters:ht,actions:ft,mutations:vt};const yt=D,bt={all:[],selected:[],current:null},_t={...pt.getters},xt={},Pt={init(t,e){return pt.mutations.init(t,e,yt)},updatePropertyOfItem(t,e){pt.mutations.updatePropertyOfItem(t,e.item,e.property,e.value)}};var wt={namespaced:!0,state:bt,getters:_t,actions:xt,mutations:Pt};const Ot={fatalities:100},$t={...pt.getters},kt={},St={updateProperty(t,e){t[e.key]=e.value}};var jt={namespaced:!0,state:Ot,getters:$t,actions:kt,mutations:St};n["a"].use(ot["a"]);const Ct={dataLoaded:!1},It={updateProperty(t,e){t[e.key]=e.value}};var At=new ot["a"].Store({state:Ct,mutations:It,actions:{},modules:{countries:gt,types:wt,mapping:jt}}),Et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"graphs"},[t.showFatalities?r("graph-fatalities"):t._e()],1)},Lt=[],qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"graph-fatalities"},[r("line-chart",{attrs:{data:t.data}})],1)},Bt=[],Mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"line-chart"})},Tt=[],Ft=r("5698"),Jt={name:"line-chart",components:{},props:{data:{type:Array,required:!0}},data(){let t={top:50,right:50,bottom:50,left:50};return{settings:{margin:t,width:800-t.left-t.right,height:300-t.top-t.bottom},svg:null,xScale:null,yScale:null}},computed:{mapping(){return this.$store.state.settings},countries(){return this.$store.state.countries.all}},methods:{update(){this.clear(),this.draw()},clear(){this.svg&&Ft["h"]("svg").remove()},draw(){let t,e;t=0,e=0;for(let r of this.data){let n=Ft["e"](r.dataPoints.map(t=>t.fatalities));r.dataPoints.length>t&&(t=r.dataPoints.length),n>e&&(e=n)}this.xScale=Ft["f"]().domain([0,t-1]).range([0,this.settings.width]),this.yScale=Ft["f"]().domain([0,e]).range([this.settings.height,0]),this.drawAxes();for(let r of this.data)this.drawCountry(r)},drawCountry(t){let e,r;r=t.dataPoints,e=Ft["d"]().x((t,e)=>this.xScale(e)).y(t=>this.yScale(t.fatalities)).curve(Ft["c"]),this.svg.append("path").datum(r).attr("class","line").attr("stroke",t.color).attr("d",e),this.svg.selectAll(".dot").data(r).enter().append("circle").attr("class","dot").attr("fill",t.color).attr("cx",(t,e)=>this.xScale(e)).attr("cy",t=>this.yScale(t.fatalities)).attr("r",2).on("mouseover",(t,e,r)=>{})},drawAxes(){this.svg=Ft["g"](".line-chart").append("svg").attr("width",this.settings.width+this.settings.margin.left+this.settings.margin.right).attr("height",this.settings.height+this.settings.margin.top+this.settings.margin.bottom).append("g").attr("transform","translate("+this.settings.margin.left+","+this.settings.margin.top+")"),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.settings.height+")").call(Ft["a"](this.xScale)),this.svg.append("g").attr("class","y axis").call(Ft["b"](this.yScale))}},mounted(){this.update()},watch:{mapping:{handler:function(t){this.update()},deep:!0},countries:{handler:function(t){this.update()},deep:!0}}},Nt=Jt,zt=(r("b992"),Object(P["a"])(Nt,Mt,Tt,!1,null,null,null)),Dt=zt.exports,Gt={name:"graph-fatalities",components:{lineChart:Dt},props:{},computed:{countries(){return this.$store.state.countries.all.filter(t=>t.active)},mapping(){return this.$store.state.settings.fatalities},data(){return this.countries.map(t=>{let e={...t};e.dataPoints=[];for(let r of e.entries)if(r.fatalities>this.mapping){let t={...r};t.index=e.dataPoints.length+1,e.dataPoints.push(t)}return delete e.entries,e})}},methods:{}},Ht=Gt,Kt=(r("6c3e"),Object(P["a"])(Ht,qt,Bt,!1,null,null,null)),Qt=Kt.exports,Rt={name:"graphs",components:{graphFatalities:Qt},props:{},computed:{showFatalities(){let t=this.$store.getters["types/getItemByProperty"]("property","fatalities");return t.active}},methods:{}},Ut=Rt,Vt=(r("32e2"),Object(P["a"])(Ut,Et,Lt,!1,null,null,null)),Wt=Vt.exports,Xt={name:"app",components:{graphs:Wt,tools:it},props:{},computed:{dataLoaded(){return this.$store.state.dataLoaded}},methods:{},mounted(){this.$store.commit("countries/init",window.data.countries),this.$store.commit("types/init",window.data.types),this.$store.commit("updateProperty",{key:"dataLoaded",value:!0}),this.$store.commit("countries/updatePropertyOfItem",{item:{id:1},property:"active",value:!0}),this.$store.commit("countries/updatePropertyOfItem",{item:{id:2},property:"active",value:!0}),this.$store.commit("types/updatePropertyOfItem",{item:{id:2},property:"active",value:!0})}},Yt=Xt,Zt=(r("6294"),Object(P["a"])(Yt,s,a,!1,null,null,null)),te=Zt.exports;n["a"].config.productionTip=!1,new n["a"]({store:At,render:function(t){return t(te)}}).$mount("#app")},"588d":function(t,e,r){"use strict";var n=r("e552"),s=r.n(n);s.a},"5c40":function(t,e,r){},"5d47":function(t,e,r){},6294:function(t,e,r){"use strict";var n=r("437c"),s=r.n(n);s.a},"674e":function(t,e,r){},"6c3e":function(t,e,r){"use strict";var n=r("3192"),s=r.n(n);s.a},"87f5":function(t,e,r){},9274:function(t,e,r){},"9e28":function(t,e,r){"use strict";var n=r("2f5c"),s=r.n(n);s.a},adee:function(t,e,r){"use strict";var n=r("2c1d"),s=r.n(n);s.a},b992:function(t,e,r){"use strict";var n=r("5c40"),s=r.n(n);s.a},bb88:function(t,e,r){"use strict";var n=r("5618"),s=r.n(n);s.a},bcae:function(t,e,r){"use strict";var n=r("674e"),s=r.n(n);s.a},c854:function(t,e,r){},e305:function(t,e,r){"use strict";var n=r("87f5"),s=r.n(n);s.a},e552:function(t,e,r){},ed8a:function(t,e,r){"use strict";var n=r("9274"),s=r.n(n);s.a}});
//# sourceMappingURL=app.e628fdd1.js.map